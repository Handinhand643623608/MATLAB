function fileStruct = u_update_fileStruct(fileStruct, location)
%U_UPDATE_FILESTRUCT Updates the file structure.
%   This function lists many of the essential fields of fileStruct that is
%   used throughout numerous functions. Each entry is listed twice (once
%   for the home and again for the office computer) to facilitate easy
%   conversion of the structure depending user location. This function also
%   automatically saves the file structure after the update, overwriting
%   the previous version.
%
%   SYNTAX:
%   fileStruct = u_update_fileStruct(fileStruct, location)
%
%   OUTPUT:
%   fileStruct:     The updated file structure.
%
%   INPUTS: (values in parentheses are optional)
%   fileStruct:     The file structure with paths that require updating.
%
%   (location):     A string representing the the computer that the code is
%                   being run on. 
%                   DEFAULT: 'home'
%                   OPTIONS:
%                       'home'      My home personal desktop computer.
%
%                       'office'    My workstation in my lab's office.
%
%   Written by Josh Grooms
%       20130604:   Updated to allow quick changing of file structure
%                   between home and office computers. Also wrote a help &
%                   reference section. 

if nargin == 1
    location = 'home';
end

switch lower(location)

    case {'home', 'desktop'}
        fileStruct.Paths = struct(...
            'Globals', 'C:\Users\Josh\Dropbox\Globals',...
            'Main', 'C:\Users\Josh\Dropbox\svnSandbox\',...
            'Raw', 'E:\Graduate Studies\Lab Work\Data Sets\Raw Data',...
            'Preprocessed', 'E:\Graduate Studies\Lab Work\Data Sets\MAT Files\human_data',...
            'DataStructs', 'E:\Graduate Studies\Lab Work\Data Sets\MAT Files',...
            'TimeCourses', 'E:\Graduate Studies\Lab Work\Data Sets\ICA Results\Time Course Files',...
            'DataObjects', 'E:\Graduate Studies\Lab Work\Data Sets\Data Objects');

        fileStruct.Files = struct(...
            'MNI',  'C:\Users\Josh\Dropbox\Globals\MNI\template\T1.nii',...
            'MasterStructs', 'C:\Users\Josh\Dropbox\svnSandbox\Structures\masterStructs.mat',...
            'Segments', struct(...
                'CSF', 'C:\Users\Josh\Dropbox\Globals\MNI\segments\csf.nii',...
                'Gray', 'C:\Users\Josh\Dropbox\Globals\MNI\segments\grey.nii',...
                'White', 'C:\Users\Josh\Dropbox\Globals\MNI\segments\white.nii'));

    case {'lab', 'work', 'office'}
        fileStruct.Paths = struct(...
            'Globals', 'C:\Users\jgrooms\Dropbox\Globals',...
            'Main', 'C:\Users\jgrooms\Dropbox\svnSandbox\',...
            'Raw', [],...
            'Preprocessed', [],...
            'DataStructs', [],...
            'TimeCourses', [],...
            'DataObjects', []);

        fileStruct.Files = struct(...
            'MNI',  'C:\Users\jgrooms\Dropbox\Globals\MNI\template\T1.nii',...
            'MasterStructs', 'C:\Users\jgrooms\Dropbox\svnSandbox\Structures\masterStructs.mat',...
            'Segments', struct(...
                'CSF', 'C:\Users\jgrooms\Dropbox\Globals\MNI\segments\csf.nii',...
                'Gray', 'C:\Users\jgrooms\Dropbox\Globals\MNI\segments\grey.nii',...
                'White', 'C:\Users\jgrooms\Dropbox\Globals\MNI\segments\white.nii'));

end
save(fileStruct.Files.MasterStructs, 'fileStruct', '-append', '-v7.3')


    